-- Temporarily disable audit triggers and add sample data
-- Run through Supabase SQL editor

-- First, disable the audit triggers temporarily
ALTER TABLE events DISABLE TRIGGER audit_events_trigger;
ALTER TABLE tasks DISABLE TRIGGER audit_tasks_trigger;

-- Insert sample events
INSERT INTO events (
  title, description, event_type, priority, status, visibility,
  location, start_datetime, end_datetime, registration_enabled,
  max_attendees, current_attendees, requires_payment, payment_amount,
  budget_allocated, budget_spent, registration_deadline, created_by
) VALUES
(
  'ישיבת ועד חודשית - דצמבר 2024',
  E'ישיבת ועד הורים חודשית לחודש דצמבר.\n\nנושאים לדיון:\n- סיכום פעילות נובמבר\n- תכנון אירועי חנוכה\n- אישור תקציב לפעילות חורף\n- עדכון על פרויקט חידוש חצר בית הספר\n- הצעות להרצאות הורים\n\nכולם מוזמנים להשתתף ולהשמיע את דעתם!',
  'meeting', 'high', 'published', 'public',
  'חדר המורים, בית ספר יסודי',
  '2024-12-15T19:00:00+02:00', '2024-12-15T21:00:00+02:00',
  true, 30, 12, false, NULL, NULL, NULL, NULL, 'admin'
),
(
  'מסיבת חנוכה לכל המשפחה',
  E'חגיגת חנוכה מיוחדת לכל תלמידי בית הספר והוריהם!\n\nבתכנית:\n🕯️ הדלקת נרות משותפת\n🍩 דוכני סופגניות ולביבות\n🎭 הצגת חנוכה של כיתות ד׳\n🎵 שירה בציבור\n🎁 שוק חנוכה - יריד יצירות תלמידים\n\nהכניסה חופשית!\nיש להביא צלחות וכלים רב פעמיים.',
  'general', 'urgent', 'published', 'public',
  'אולם הספורט של בית הספר',
  '2024-12-26T17:00:00+02:00', '2024-12-26T20:00:00+02:00',
  true, 500, 237, false, NULL, 15000, 8500, NULL, 'admin'
),
(
  'הרצאת הורים: "גבולות בעידן הדיגיטלי"',
  E'הרצאה מרתקת להורים בנושא הצבת גבולות לילדים בעולם הדיגיטלי.\n\nהמרצה: ד"ר יעל כהן, פסיכולוגית קלינית ומומחית להתמכרויות דיגיטליות\n\nנושאי ההרצאה:\n• זמן מסך מומלץ לפי גילאים\n• סימני אזהרה להתמכרות\n• כלים מעשיים להצבת גבולות\n• יצירת הסכם משפחתי לשימוש במסכים\n• מענה לשאלות הורים\n\nההרצאה מיועדת להורי תלמידים בכל הגילאים.\nכיבוד קל יוגש בהפסקה.',
  'workshop', 'normal', 'published', 'public',
  'אולם הכנסים, קומה 2',
  '2025-01-08T20:00:00+02:00', '2025-01-08T22:00:00+02:00',
  true, 120, 67, true, 30, NULL, NULL, NULL, 'admin'
),
(
  'טיול משפחות לירושלים',
  E'טיול משפחות מאורגן לירושלים!\n\nמסלול הטיול:\n🚌 07:00 - יציאה מבית הספר\n🏛️ 09:00 - סיור מודרך במוזיאון ישראל\n🍔 12:00 - ארוחת צהריים (עצמאית)\n🎨 14:00 - סדנת יצירה לילדים במוזיאון\n🛍️ 16:00 - זמן חופשי בשוק מחנה יהודה\n🚌 18:00 - חזרה הביתה\n\nהמחיר כולל: הסעה, כניסה למוזיאון וסדנה.\nהמחיר אינו כולל: ארוחת צהריים.\n\nמספר המקומות מוגבל!',
  'trip', 'high', 'published', 'public',
  'נקודת איסוף: חניית בית הספר',
  '2025-01-19T07:00:00+02:00', '2025-01-19T19:00:00+02:00',
  true, 100, 78, true, 150, 5000, NULL, '2025-01-12T23:59:59+02:00', 'admin'
),
(
  'יום ספורט בית ספרי',
  E'יום ספורט וכיף לכל תלמידי בית הספר!\n\nלו"ז היום:\n08:30 - התכנסות וחלוקה לבתים\n09:00 - טקס פתיחה\n09:30 - תחרויות ספורט לפי שכבות\n11:00 - הפסקת פירות\n11:30 - משחקי בתים\n13:00 - טקס סיום וחלוקת גביעים\n\nתלמידים נדרשים להגיע עם:\n- בגדי ספורט ונעלי ספורט\n- כובע\n- בקבוק מים\n- ארוחת בוקר\n\nועד ההורים ידאג לפירות ושתייה קרה במהלך היום.',
  'general', 'normal', 'published', 'public',
  'מגרש הספורט של בית הספר',
  '2025-02-05T08:30:00+02:00', '2025-02-05T13:30:00+02:00',
  false, NULL, NULL, false, NULL, 8000, 0, NULL, 'admin'
),
(
  'ערב גיוס כספים - מכירת עוגות',
  E'ערב גיוס כספים למען שיפוץ ספריית בית הספר.\n\nמה בתכנית:\n🍰 מכירת עוגות בית - תרומת ההורים\n☕ בית קפה זמני\n🎶 מוזיקה חיה - תלמידי המגמה המוזיקלית\n🎯 דוכני משחקים לילדים\n🎁 הגרלה - פרס ראשון: סופ"ש בצימר!\n\nכל ההכנסות קודש לשיפוץ הספרייה!\n\nהורים המעוניינים לתרום עוגות מתבקשים להירשם מראש.',
  'fundraiser', 'high', 'published', 'public',
  'חצר בית הספר',
  '2025-01-25T18:00:00+02:00', '2025-01-25T21:00:00+02:00',
  true, 200, 45, false, NULL, NULL, NULL, NULL, 'admin'
);

-- Insert sample tasks
INSERT INTO tasks (
  title, description, status, priority, owner_name, owner_phone, due_date
) VALUES
(
  'הזמנת כיבוד לישיבת הועד',
  'להזמין כיבוד קל לישיבת הועד החודשית - עוגיות, פירות, שתייה חמה וקרה',
  'pending', 'normal', 'שרה כהן', '050-1234567', '2024-12-13'
),
(
  'תיאום הסעות לטיול לירושלים',
  'ליצור קשר עם חברת ההסעות, לקבל הצעות מחיר ולסגור הזמנה ל-2 אוטובוסים',
  'in_progress', 'high', 'דני לוי', '052-9876543', '2025-01-10'
),
(
  'הכנת מצגת לישיבת ההורים',
  'להכין מצגת עם סיכום פעילות הועד לרבעון האחרון',
  'pending', 'normal', 'מיכל ברק', '054-5555555', '2024-12-14'
),
(
  'פרסום אירוע חנוכה ברשתות החברתיות',
  'להכין פוסט מעוצב ולפרסם בקבוצות הווטסאפ ובפייסבוק של ההורים',
  'pending', 'urgent', 'יעל גרין', '053-3333333', '2024-12-20'
),
(
  'רכישת פרסים להגרלה',
  'לרכוש פרסים להגרלה בערב גיוס הכספים - תקציב 2000 ש"ח',
  'pending', 'normal', 'אבי שמש', '058-7777777', '2025-01-20'
);

-- Insert sample issues
INSERT INTO issues (
  title, description, category, priority, status, reporter_name
) VALUES
(
  'תאורה לא עובדת במסדרון הראשי',
  'התאורה במסדרון הראשי של קומה 2 לא עובדת כבר שבוע. מסוכן לילדים בבוקר.',
  'maintenance', 'high', 'open', 'רונית אברהם'
),
(
  'בעיית ניקיון בשירותים',
  'השירותים בקומה הראשונה לא נקיים מספיק. צריך לדבר עם חברת הניקיון.',
  'maintenance', 'normal', 'in_progress', 'חיים דוד'
),
(
  'חסר ציוד ספורט',
  'חסרים כדורים ומחבטים לשיעורי החינוך הגופני',
  'other', 'low', 'open', 'המורה לספורט'
);

-- Insert sample protocol
INSERT INTO protocols (
  title, summary, full_text, year, academic_year, categories, protocol_date, protocol_number, is_public
) VALUES
(
  'פרוטוקול ישיבת ועד - נובמבר 2024',
  'ישיבת ועד חודשית שדנה בתכנון אירועי חנוכה, תקציב שנתי ופרויקט חידוש החצר',
  E'פרוטוקול ישיבת ועד הורים\nתאריך: 15.11.2024\nנוכחים: 12 חברי ועד\n\nנושאים שנדונו:\n1. אישור פרוטוקול קודם - אושר פה אחד\n2. תכנון אירועי חנוכה - הוחלט על מסיבה בתאריך 26.12\n3. אישור תקציב לרבעון הבא - אושר תקציב של 25,000 ש"ח\n4. עדכון פרויקט חידוש חצר - הפרויקט בשלבי תכנון מתקדמים\n\nהחלטות:\n- לקיים מסיבת חנוכה ב-26.12\n- להקצות 15,000 ש"ח לאירוע\n- להתחיל בגיוס כספים לפרויקט החצר',
  2024, '2024-2025', ARRAY['ישיבות ועד'], '2024-11-15', '2024-11', true
);

-- Re-enable the triggers
ALTER TABLE events ENABLE TRIGGER audit_events_trigger;
ALTER TABLE tasks ENABLE TRIGGER audit_tasks_trigger;

-- Confirm data was inserted
SELECT 'Events inserted:', COUNT(*) FROM events;
SELECT 'Tasks inserted:', COUNT(*) FROM tasks;
SELECT 'Issues inserted:', COUNT(*) FROM issues;
SELECT 'Protocols inserted:', COUNT(*) FROM protocols;